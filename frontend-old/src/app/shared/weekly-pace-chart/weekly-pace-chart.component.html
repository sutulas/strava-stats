<div class="chart-container">
  <div *ngIf="weeklyStats && weeklyStats.length > 0; else noData" class="chart-wrapper">
    <div class="chart-header mb-4">
      <h3 class="text-lg font-semibold text-gray-900">Weekly Pace Trends</h3>
      <p class="text-sm text-gray-600">Average pace per mile over the past 8 weeks</p>
    </div>
    
    <!-- Simple line chart -->
    <div class="chart-content">
      <div class="chart-area">
        <!-- Y-axis labels -->
        <div class="y-axis">
          <div class="y-label">{{ formatPace(getPaceRange().max) }}</div>
          <div class="y-label">{{ formatPace((getPaceRange().min + getPaceRange().max) / 2) }}</div>
          <div class="y-label">{{ formatPace(getPaceRange().min) }}</div>
        </div>
        
        <!-- Chart area -->
        <div class="chart-main">
          <!-- Grid lines -->
          <div class="grid-lines"></div>
          
          <!-- Line connecting points -->
          <svg class="line-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <polyline 
              [attr.points]="getLinePoints()" 
              class="line-path"
              fill="none"
              stroke="#f59e0b"
              stroke-width="2"/>
          </svg>
          
          <!-- Data points -->
          <div 
            *ngFor="let point of getChartPoints(); let i = index"
            class="data-point"
            [style.left]="point.x + '%'"
            [style.top]="point.y + '%'"
            (mouseenter)="onPointHover($event, point)"
            (mouseleave)="onPointLeave()">
          </div>
        </div>
        
        <!-- X-axis labels -->
        <div class="x-axis">
          <div 
            *ngFor="let point of getChartPoints(); let i = index"
            class="x-label"
            [style.left]="point.x + '%'">
            {{ formatWeekLabel(point.data.name) }}
          </div>
        </div>
      </div>
      
      <!-- Tooltip -->
      <div class="chart-tooltip" [class.visible]="showTooltip" [style.left]="tooltipX + 'px'" [style.top]="tooltipY + 'px'">
        <div class="tooltip-content" *ngIf="tooltipData">
          <div class="font-semibold">{{ tooltipData.name }}</div>
          <div>Pace: {{ formatPace(tooltipData.pace) }}</div>
          <div>Miles: {{ tooltipData.miles.toFixed(2) }} mi</div>
          <div>Runs: {{ tooltipData.runs }}</div>
        </div>
      </div>
    </div>
  </div>
  
  <ng-template #noData>
    <div class="text-center py-8 text-gray-500">
      <div class="text-4xl mb-2">ðŸ“Š</div>
      <p>No weekly data available</p>
      <p class="text-sm">Refresh your data to see pace trends</p>
    </div>
  </ng-template>
</div> 